<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Women Safety ‚Äì Community Well-Being Survey</title>
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    :root {
      --primary: #6366f1;
      --primary-dark: #4f46e5;
      --primary-light: #e0e7ff;
      --secondary: #ec4899;
      --success: #10b981;
      --warning: #f59e0b;
      --danger: #ef4444;
      --gray-50: #f9fafb;
      --gray-100: #f3f4f6;
      --gray-200: #e5e7eb;
      --gray-300: #d1d5db;
      --gray-400: #9ca3af;
      --gray-500: #6b7280;
      --gray-600: #4b5563;
      --gray-700: #374151;
      --gray-800: #1f2937;
      --gray-900: #111827;
      --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
      --shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
      --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
      --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
      --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
      --radius-sm: 0.375rem;
      --radius: 0.5rem;
      --radius-md: 0.75rem;
      --radius-lg: 1rem;
      --radius-xl: 1.5rem;
      --transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
      --transition-slow: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 24px 16px;
      line-height: 1.6;
    }

    .container {
      max-width: 900px;
      margin: 0 auto;
    }

    /* Header Card */
    .header-card {
      background: white;
      border-radius: var(--radius-xl);
      padding: 32px;
      margin-bottom: 24px;
      box-shadow: var(--shadow-xl);
      text-align: center;
      animation: fadeInDown 0.6s ease-out;
    }

    .header-icon {
      width: 64px;
      height: 64px;
      background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
      border-radius: var(--radius-lg);
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-size: 32px;
      margin-bottom: 16px;
      box-shadow: var(--shadow-lg);
    }

    .header-title {
      font-size: 28px;
      font-weight: 700;
      color: var(--gray-900);
      margin-bottom: 8px;
      background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .header-subtitle {
      font-size: 16px;
      color: var(--gray-500);
      max-width: 500px;
      margin: 0 auto;
    }

    /* Progress Steps */
    .progress-container {
      background: white;
      border-radius: var(--radius-xl);
      padding: 24px 32px;
      margin-bottom: 24px;
      box-shadow: var(--shadow-lg);
      animation: fadeInUp 0.6s ease-out 0.1s both;
    }

    .progress-steps {
      display: flex;
      justify-content: space-between;
      position: relative;
    }

    .progress-steps::before {
      content: '';
      position: absolute;
      top: 20px;
      left: 50px;
      right: 50px;
      height: 4px;
      background: var(--gray-200);
      border-radius: 2px;
      z-index: 0;
    }

    .progress-line {
      position: absolute;
      top: 20px;
      left: 50px;
      height: 4px;
      background: linear-gradient(90deg, var(--primary) 0%, var(--secondary) 100%);
      border-radius: 2px;
      z-index: 1;
      transition: width 0.5s ease;
    }

    .step {
      display: flex;
      flex-direction: column;
      align-items: center;
      position: relative;
      z-index: 2;
      flex: 1;
    }

    .step-circle {
      width: 44px;
      height: 44px;
      border-radius: 50%;
      background: white;
      border: 3px solid var(--gray-300);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
      font-size: 16px;
      color: var(--gray-400);
      transition: var(--transition-slow);
      margin-bottom: 8px;
    }

    .step.active .step-circle {
      border-color: var(--primary);
      background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
      color: white;
      box-shadow: 0 0 0 4px var(--primary-light);
      transform: scale(1.1);
    }

    .step.completed .step-circle {
      border-color: var(--success);
      background: var(--success);
      color: white;
    }

    .step-label {
      font-size: 13px;
      font-weight: 600;
      color: var(--gray-400);
      transition: var(--transition);
    }

    .step.active .step-label {
      color: var(--primary);
    }

    .step.completed .step-label {
      color: var(--success);
    }

    /* Form Card */
    .form-card {
      background: white;
      border-radius: var(--radius-xl);
      padding: 32px;
      box-shadow: var(--shadow-xl);
      animation: fadeInUp 0.6s ease-out 0.2s both;
    }

    /* Section Cards */
    .section-card {
      background: var(--gray-50);
      border-radius: var(--radius-lg);
      padding: 24px;
      margin-bottom: 24px;
      border: 1px solid var(--gray-200);
      transition: var(--transition);
      animation: fadeIn 0.5s ease-out;
    }

    .section-card:hover {
      box-shadow: var(--shadow-md);
      border-color: var(--gray-300);
    }

    .section-card:last-child {
      margin-bottom: 0;
    }

    .section-header {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 20px;
      padding-bottom: 16px;
      border-bottom: 2px solid var(--gray-200);
    }

    .section-icon {
      width: 40px;
      height: 40px;
      border-radius: var(--radius);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
    }

    .section-icon.location {
      background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
    }

    .section-icon.personal {
      background: linear-gradient(135deg, #8b5cf6 0%, #6d28d9 100%);
    }

    .section-icon.social {
      background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
    }

    .section-icon.safety {
      background: linear-gradient(135deg, #ec4899 0%, #be185d 100%);
    }

    .section-title {
      font-size: 18px;
      font-weight: 700;
      color: var(--gray-800);
    }

    .section-subtitle {
      font-size: 13px;
      color: var(--gray-500);
      margin-top: 2px;
    }

    /* Form Groups */
    .form-group {
      margin-bottom: 20px;
    }

    .form-group:last-child {
      margin-bottom: 0;
    }

    .field-label {
      display: block;
      font-size: 14px;
      font-weight: 600;
      color: var(--gray-700);
      margin-bottom: 8px;
    }

    .field-label-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 8px;
    }

    .field-hint {
      font-size: 12px;
      color: var(--gray-400);
      font-weight: 500;
    }

    /* Text Inputs */
    .text-input-wrapper {
      position: relative;
    }

    .text-input {
      width: 100%;
      padding: 14px 16px;
      font-size: 15px;
      border-radius: var(--radius);
      border: 2px solid var(--gray-200);
      background: white;
      color: var(--gray-800);
      outline: none;
      transition: var(--transition);
    }

    .text-input:hover {
      border-color: var(--gray-300);
    }

    .text-input:focus {
      border-color: var(--primary);
      box-shadow: 0 0 0 4px var(--primary-light);
    }

    textarea.text-input {
      min-height: 100px;
      resize: vertical;
    }

    /* Custom Select Dropdown */
    .custom-select {
      position: relative;
    }

    .select-display {
      width: 100%;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 14px 16px;
      border-radius: var(--radius);
      border: 2px solid var(--gray-200);
      background: white;
      font-size: 15px;
      color: var(--gray-800);
      cursor: pointer;
      outline: none;
      transition: var(--transition);
    }

    .select-display:hover {
      border-color: var(--gray-300);
    }

    .select-display:focus {
      border-color: var(--primary);
      box-shadow: 0 0 0 4px var(--primary-light);
    }

    .select-display.active {
      border-color: var(--primary);
      border-bottom-left-radius: 0;
      border-bottom-right-radius: 0;
    }

    .select-placeholder {
      color: var(--gray-400);
    }

    .select-value {
      color: var(--gray-800);
      font-weight: 500;
    }

    .select-arrow {
      font-size: 12px;
      color: var(--gray-400);
      transition: transform 0.3s ease;
    }

    .select-display.active .select-arrow {
      transform: rotate(180deg);
    }

    .select-panel {
      position: absolute;
      left: 0;
      right: 0;
      top: 100%;
      background: white;
      border-radius: 0 0 var(--radius) var(--radius);
      border: 2px solid var(--primary);
      border-top: none;
      box-shadow: var(--shadow-lg);
      padding: 12px;
      z-index: 100;
      opacity: 0;
      visibility: hidden;
      transform: translateY(-10px);
      transition: all 0.2s ease;
    }

    .select-panel.open {
      opacity: 1;
      visibility: visible;
      transform: translateY(0);
    }

    .search-input {
      width: 100%;
      padding: 10px 14px;
      font-size: 14px;
      border-radius: var(--radius-sm);
      border: 2px solid var(--gray-200);
      background: var(--gray-50);
      color: var(--gray-800);
      outline: none;
      transition: var(--transition);
      margin-bottom: 8px;
    }

    .search-input:focus {
      border-color: var(--primary);
      background: white;
    }

    .select-options {
      list-style: none;
      max-height: 240px;
      overflow-y: auto;
      padding: 4px;
    }

    .select-options::-webkit-scrollbar {
      width: 6px;
    }

    .select-options::-webkit-scrollbar-track {
      background: var(--gray-100);
      border-radius: 3px;
    }

    .select-options::-webkit-scrollbar-thumb {
      background: var(--gray-300);
      border-radius: 3px;
    }

    .select-option {
      padding: 10px 12px;
      border-radius: var(--radius-sm);
      font-size: 14px;
      cursor: pointer;
      transition: var(--transition);
      color: var(--gray-700);
    }

    .select-option:hover {
      background: var(--primary-light);
      color: var(--primary-dark);
    }

    .no-results {
      font-size: 13px;
      color: var(--gray-500);
      padding: 16px;
      text-align: center;
    }

    /* Radio & Checkbox Cards */
    .options-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
      gap: 12px;
    }

    .options-grid.two-col {
      grid-template-columns: repeat(2, 1fr);
    }

    .options-grid.three-col {
      grid-template-columns: repeat(3, 1fr);
    }

    @media (max-width: 640px) {
      .options-grid.two-col,
      .options-grid.three-col {
        grid-template-columns: 1fr;
      }
    }

    .option-card {
      position: relative;
      cursor: pointer;
    }

    .option-card input {
      position: absolute;
      opacity: 0;
      width: 0;
      height: 0;
    }

    .option-label {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 14px 16px;
      background: white;
      border: 2px solid var(--gray-200);
      border-radius: var(--radius);
      font-size: 14px;
      font-weight: 500;
      color: var(--gray-600);
      transition: var(--transition);
      cursor: pointer;
    }

    .option-card:hover .option-label {
      border-color: var(--gray-300);
      background: var(--gray-50);
    }

    .option-card input:checked + .option-label {
      border-color: var(--primary);
      background: var(--primary-light);
      color: var(--primary-dark);
      box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
    }

    .option-icon {
      width: 20px;
      height: 20px;
      border: 2px solid var(--gray-300);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: var(--transition);
      flex-shrink: 0;
    }

    .option-card input[type="checkbox"] + .option-label .option-icon {
      border-radius: var(--radius-sm);
    }

    .option-card input:checked + .option-label .option-icon {
      border-color: var(--primary);
      background: var(--primary);
    }

    .option-icon::after {
      content: '';
      width: 8px;
      height: 8px;
      background: white;
      border-radius: 50%;
      opacity: 0;
      transform: scale(0);
      transition: var(--transition);
    }

    .option-card input[type="checkbox"] + .option-label .option-icon::after {
      width: 10px;
      height: 6px;
      border-radius: 0;
      background: transparent;
      border-left: 2px solid white;
      border-bottom: 2px solid white;
      transform: rotate(-45deg) scale(0);
    }

    .option-card input:checked + .option-label .option-icon::after {
      opacity: 1;
      transform: scale(1);
    }

    .option-card input[type="checkbox"]:checked + .option-label .option-icon::after {
      transform: rotate(-45deg) scale(1);
    }

    /* Submit Button */
    .submit-container {
      margin-top: 32px;
    }

    .submit-btn {
      width: 100%;
      padding: 18px 32px;
      font-size: 16px;
      font-weight: 700;
      border-radius: var(--radius);
      border: none;
      background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
      color: white;
      cursor: pointer;
      transition: var(--transition);
      box-shadow: 0 4px 14px 0 rgba(99, 102, 241, 0.39);
      position: relative;
      overflow: hidden;
    }

    .submit-btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
      transition: left 0.5s ease;
    }

    .submit-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px 0 rgba(99, 102, 241, 0.5);
    }

    .submit-btn:hover::before {
      left: 100%;
    }

    .submit-btn:active {
      transform: translateY(0);
    }

    /* Error Messages */
    .error-message {
      display: none;
      margin-top: 8px;
      font-size: 13px;
      color: var(--danger);
      font-weight: 500;
      padding-left: 4px;
    }

    .error-message.show {
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .error-message::before {
      content: '‚ö†';
    }

    /* Success Message */
    .success-message {
      display: none;
      margin-top: 24px;
      padding: 20px;
      background: linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%);
      border: 2px solid var(--success);
      border-radius: var(--radius);
      color: #065f46;
      font-weight: 500;
      text-align: center;
      animation: fadeIn 0.5s ease-out;
    }

    .success-message.show {
      display: block;
    }

    /* Hidden sections */
    .hidden-section {
      display: none;
    }

    .hidden-section.show {
      display: block;
      animation: fadeInUp 0.5s ease-out;
    }

    /* Animations */
    @keyframes fadeIn {
      from {
        opacity: 0;
      }
      to {
        opacity: 1;
      }
    }

    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes fadeInDown {
      from {
        opacity: 0;
        transform: translateY(-20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* Responsive */
    @media (max-width: 768px) {
      body {
        padding: 16px 12px;
      }

      .header-card,
      .form-card {
        padding: 24px 20px;
      }

      .header-title {
        font-size: 24px;
      }

      .progress-container {
        padding: 20px 16px;
      }

      .step-label {
        font-size: 11px;
      }

      .step-circle {
        width: 36px;
        height: 36px;
        font-size: 14px;
      }

      .progress-steps::before {
        top: 16px;
        left: 40px;
        right: 40px;
      }

      .progress-line {
        top: 16px;
        left: 40px;
      }

      .section-card {
        padding: 20px 16px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- Header -->
    <div class="header-card">
      <div class="header-icon">üõ°Ô∏è</div>
      <h1 class="header-title">Women Safety Survey</h1>
      <p class="header-subtitle">Help us understand and improve community well-being by sharing your experiences</p>
    </div>

    <!-- Progress Steps -->
    <div class="progress-container">
      <div class="progress-steps">
        <div class="progress-line" id="progressLine" style="width: 33%"></div>
        <div class="step active" id="step1Indicator">
          <div class="step-circle">1</div>
          <span class="step-label">Location</span>
        </div>
        <div class="step" id="step2Indicator">
          <div class="step-circle">2</div>
          <span class="step-label">Personal Details</span>
        </div>
        <div class="step" id="step3Indicator">
          <div class="step-circle">3</div>
          <span class="step-label">Safety Survey</span>
        </div>
      </div>
    </div>

    <!-- Form -->
    <div class="form-card">
      <form id="surveyForm" novalidate>
        
        <!-- Location Section -->
        <div class="section-card" id="locationSection">
          <div class="section-header">
            <div class="section-icon location">üìç</div>
            <div>
              <h2 class="section-title">Location Details</h2>
              <p class="section-subtitle">Select your Police Station and Area</p>
            </div>
          </div>

          <!-- Police Station -->
          <div class="form-group">
            <div class="field-label-row">
              <label class="field-label" for="policeStationDisplay">Police Station</label>
              <span class="field-hint">Search and select</span>
            </div>
            <div class="custom-select" id="policeStationDropdown">
              <button type="button" id="policeStationDisplay" class="select-display">
                <span id="policeStationPlaceholder" class="select-placeholder">Select Police Station</span>
                <span id="policeStationValue" class="select-value" style="display: none"></span>
                <span class="select-arrow">‚ñº</span>
              </button>
              <div class="select-panel" id="policeStationPanel">
                <input type="text" id="policeStationSearch" class="search-input select-search" placeholder="Search police station..." autocomplete="off" />
                <ul id="policeStationOptions" class="select-options"></ul>
                <div id="policeStationNoResults" class="no-results" style="display: none">No stations found.</div>
              </div>
            </div>
            <input type="hidden" id="policeStation" name="policeStation" />
            <div id="policeStationError" class="error-message">Please select a Police Station.</div>
          </div>

          <!-- Area -->
          <div class="form-group">
            <div class="field-label-row">
              <label class="field-label" for="areaDisplay">Area / Village</label>
              <span class="field-hint">Search and select</span>
            </div>
            <div class="custom-select" id="areaDropdown">
              <button type="button" id="areaDisplay" class="select-display">
                <span id="areaPlaceholder" class="select-placeholder">Select Area / Village</span>
                <span id="areaValue" class="select-value" style="display: none"></span>
                <span class="select-arrow">‚ñº</span>
              </button>
              <div class="select-panel" id="areaPanel">
                <input type="text" id="areaSearch" class="search-input select-search" placeholder="Search area..." autocomplete="off" />
                <ul id="areaOptions" class="select-options"></ul>
                <div id="areaNoResults" class="no-results" style="display: none">No areas found.</div>
              </div>
            </div>
            <input type="hidden" id="area" name="area" />
            <div id="areaError" class="error-message">Please select an Area.</div>
          </div>
        </div>

        <!-- Survey Sections (Hidden until Area is selected) -->
        <div id="surveySections" class="hidden-section">
          
          <!-- Personal Details Section -->
          <div class="section-card">
            <div class="section-header">
              <div class="section-icon personal">üë§</div>
              <div>
                <h2 class="section-title">Personal Details</h2>
                <p class="section-subtitle">Tell us a bit about yourself</p>
              </div>
            </div>

            <!-- Name -->
            <div class="form-group">
              <label class="field-label" for="respondentName">Respondent Name</label>
              <div class="text-input-wrapper">
                <input type="text" id="respondentName" name="respondentName" class="text-input" placeholder="Enter your full name" />
              </div>
              <div id="respondentNameError" class="error-message"></div>
            </div>

            <!-- Age Group -->
            <div class="form-group">
              <label class="field-label">Age Group</label>
              <div class="options-grid three-col">
                <label class="option-card">
                  <input type="radio" name="ageGroup" value="Below 25" />
                  <div class="option-label">
                    <span class="option-icon"></span>
                    <span>Below 25</span>
                  </div>
                </label>
                <label class="option-card">
                  <input type="radio" name="ageGroup" value="25‚Äì45" />
                  <div class="option-label">
                    <span class="option-icon"></span>
                    <span>25‚Äì45</span>
                  </div>
                </label>
                <label class="option-card">
                  <input type="radio" name="ageGroup" value="Above 45" />
                  <div class="option-label">
                    <span class="option-icon"></span>
                    <span>Above 45</span>
                  </div>
                </label>
              </div>
              <div id="ageGroupError" class="error-message"></div>
            </div>

            <!-- Mobile Number -->
            <div class="form-group">
              <label class="field-label" for="mobileNumber">Mobile Number</label>
              <div class="text-input-wrapper">
                <input type="tel" id="mobileNumber" name="mobileNumber" class="text-input" inputmode="numeric" maxlength="10" placeholder="Enter 10 digit mobile number" />
              </div>
              <div id="mobileNumberError" class="error-message"></div>
            </div>

            <!-- Occupation -->
            <div class="form-group">
              <label class="field-label">Occupation</label>
              <div class="options-grid two-col">
                <label class="option-card">
                  <input type="radio" name="occupation" value="Student" />
                  <div class="option-label">
                    <span class="option-icon"></span>
                    <span>Student</span>
                  </div>
                </label>
                <label class="option-card">
                  <input type="radio" name="occupation" value="Homemaker" />
                  <div class="option-label">
                    <span class="option-icon"></span>
                    <span>Homemaker</span>
                  </div>
                </label>
                <label class="option-card">
                  <input type="radio" name="occupation" value="Employed (Govt / Private / Self)" />
                  <div class="option-label">
                    <span class="option-icon"></span>
                    <span>Employed</span>
                  </div>
                </label>
                <label class="option-card">
                  <input type="radio" name="occupation" value="Unemployed" />
                  <div class="option-label">
                    <span class="option-icon"></span>
                    <span>Unemployed</span>
                  </div>
                </label>
              </div>
              <div id="occupationError" class="error-message"></div>
            </div>
          </div>

          <!-- Social Environment Section -->
          <div class="section-card">
            <div class="section-header">
              <div class="section-icon social">üèòÔ∏è</div>
              <div>
                <h2 class="section-title">Social Environment</h2>
                <p class="section-subtitle">About your family and neighborhood</p>
              </div>
            </div>

            <!-- Family Behavior -->
            <div class="form-group">
              <label class="field-label">Family behavior towards you/your children</label>
              <div class="options-grid three-col">
                <label class="option-card">
                  <input type="radio" name="familyBehavior" value="Good" />
                  <div class="option-label">
                    <span class="option-icon"></span>
                    <span>Good</span>
                  </div>
                </label>
                <label class="option-card">
                  <input type="radio" name="familyBehavior" value="Average" />
                  <div class="option-label">
                    <span class="option-icon"></span>
                    <span>Average</span>
                  </div>
                </label>
                <label class="option-card">
                  <input type="radio" name="familyBehavior" value="Poor" />
                  <div class="option-label">
                    <span class="option-icon"></span>
                    <span>Poor</span>
                  </div>
                </label>
              </div>
              <div id="familyBehaviorError" class="error-message"></div>
            </div>

            <!-- Addiction -->
            <div class="form-group">
              <label class="field-label">Any addiction in family members?</label>
              <div class="options-grid two-col">
                <label class="option-card">
                  <input type="checkbox" name="addiction" value="Alcohol" />
                  <div class="option-label">
                    <span class="option-icon"></span>
                    <span>Alcohol</span>
                  </div>
                </label>
                <label class="option-card">
                  <input type="checkbox" name="addiction" value="Drugs" />
                  <div class="option-label">
                    <span class="option-icon"></span>
                    <span>Drugs</span>
                  </div>
                </label>
                <label class="option-card">
                  <input type="checkbox" name="addiction" value="Tobacco" />
                  <div class="option-label">
                    <span class="option-icon"></span>
                    <span>Tobacco</span>
                  </div>
                </label>
                <label class="option-card">
                  <input type="checkbox" name="addiction" value="No" />
                  <div class="option-label">
                    <span class="option-icon"></span>
                    <span>No</span>
                  </div>
                </label>
              </div>
              <div id="addictionError" class="error-message"></div>
            </div>

            <!-- Neighbourhood -->
            <div class="form-group">
              <label class="field-label">Neighbourhood behaviour towards you</label>
              <div class="options-grid three-col">
                <label class="option-card">
                  <input type="radio" name="neighbourhood" value="Good" />
                  <div class="option-label">
                    <span class="option-icon"></span>
                    <span>Good</span>
                  </div>
                </label>
                <label class="option-card">
                  <input type="radio" name="neighbourhood" value="Average" />
                  <div class="option-label">
                    <span class="option-icon"></span>
                    <span>Average</span>
                  </div>
                </label>
                <label class="option-card">
                  <input type="radio" name="neighbourhood" value="Poor" />
                  <div class="option-label">
                    <span class="option-icon"></span>
                    <span>Poor</span>
                  </div>
                </label>
              </div>
              <div id="neighbourhoodError" class="error-message"></div>
            </div>
          </div>

          <!-- Safety & Public Experience Section -->
          <div class="section-card">
            <div class="section-header">
              <div class="section-icon safety">üõ°Ô∏è</div>
              <div>
                <h2 class="section-title">Safety & Public Experience</h2>
                <p class="section-subtitle">Share your safety experiences</p>
              </div>
            </div>

            <!-- Street Safety -->
            <div class="form-group">
              <label class="field-label">Safety of your street/locality</label>
              <div class="options-grid three-col">
                <label class="option-card">
                  <input type="radio" name="streetSafety" value="Safe" />
                  <div class="option-label">
                    <span class="option-icon"></span>
                    <span>Safe</span>
                  </div>
                </label>
                <label class="option-card">
                  <input type="radio" name="streetSafety" value="Neutral" />
                  <div class="option-label">
                    <span class="option-icon"></span>
                    <span>Neutral</span>
                  </div>
                </label>
                <label class="option-card">
                  <input type="radio" name="streetSafety" value="Unsafe" />
                  <div class="option-label">
                    <span class="option-icon"></span>
                    <span>Unsafe</span>
                  </div>
                </label>
              </div>
              <div id="streetSafetyError" class="error-message"></div>
            </div>

            <!-- Public Transport -->
            <div class="form-group">
              <label class="field-label">Problems faced during public transportation</label>
              <div class="options-grid three-col">
                <label class="option-card">
                  <input type="radio" name="publicTransport" value="Yes" />
                  <div class="option-label">
                    <span class="option-icon"></span>
                    <span>Yes</span>
                  </div>
                </label>
                <label class="option-card">
                  <input type="radio" name="publicTransport" value="Sometimes" />
                  <div class="option-label">
                    <span class="option-icon"></span>
                    <span>Sometimes</span>
                  </div>
                </label>
                <label class="option-card">
                  <input type="radio" name="publicTransport" value="No" />
                  <div class="option-label">
                    <span class="option-icon"></span>
                    <span>No</span>
                  </div>
                </label>
              </div>
              <div id="publicTransportError" class="error-message"></div>
            </div>

            <!-- School Safety -->
            <div class="form-group">
              <label class="field-label">If student: Safety of school/college surroundings</label>
              <div class="options-grid three-col">
                <label class="option-card">
                  <input type="radio" name="schoolSafety" value="Safe" />
                  <div class="option-label">
                    <span class="option-icon"></span>
                    <span>Safe</span>
                  </div>
                </label>
                <label class="option-card">
                  <input type="radio" name="schoolSafety" value="Neutral" />
                  <div class="option-label">
                    <span class="option-icon"></span>
                    <span>Neutral</span>
                  </div>
                </label>
                <label class="option-card">
                  <input type="radio" name="schoolSafety" value="Unsafe" />
                  <div class="option-label">
                    <span class="option-icon"></span>
                    <span>Unsafe</span>
                  </div>
                </label>
              </div>
              <div id="schoolSafetyError" class="error-message"></div>
            </div>

            <!-- Cyber Harassment -->
            <div class="form-group">
              <label class="field-label">Faced cyber harassment/blackmail</label>
              <div class="options-grid three-col">
                <label class="option-card">
                  <input type="radio" name="cyberHarassment" value="Yes" />
                  <div class="option-label">
                    <span class="option-icon"></span>
                    <span>Yes</span>
                  </div>
                </label>
                <label class="option-card">
                  <input type="radio" name="cyberHarassment" value="No" />
                  <div class="option-label">
                    <span class="option-icon"></span>
                    <span>No</span>
                  </div>
                </label>
                <label class="option-card">
                  <input type="radio" name="cyberHarassment" value="Not Sure" />
                  <div class="option-label">
                    <span class="option-icon"></span>
                    <span>Not Sure</span>
                  </div>
                </label>
              </div>
              <div id="cyberHarassmentError" class="error-message"></div>
            </div>

            <!-- Stalking -->
            <div class="form-group">
              <label class="field-label">Faced forced love proposals/stalking</label>
              <div class="options-grid three-col">
                <label class="option-card">
                  <input type="radio" name="stalking" value="Yes" />
                  <div class="option-label">
                    <span class="option-icon"></span>
                    <span>Yes</span>
                  </div>
                </label>
                <label class="option-card">
                  <input type="radio" name="stalking" value="No" />
                  <div class="option-label">
                    <span class="option-icon"></span>
                    <span>No</span>
                  </div>
                </label>
                <label class="option-card">
                  <input type="radio" name="stalking" value="Not Sure" />
                  <div class="option-label">
                    <span class="option-icon"></span>
                    <span>Not Sure</span>
                  </div>
                </label>
              </div>
              <div id="stalkingError" class="error-message"></div>
            </div>

            <!-- Emergency Numbers -->
            <div class="form-group">
              <label class="field-label">Emergency police numbers visible in public places</label>
              <div class="options-grid three-col">
                <label class="option-card">
                  <input type="radio" name="emergencyNumbers" value="Yes" />
                  <div class="option-label">
                    <span class="option-icon"></span>
                    <span>Yes</span>
                  </div>
                </label>
                <label class="option-card">
                  <input type="radio" name="emergencyNumbers" value="No" />
                  <div class="option-label">
                    <span class="option-icon"></span>
                    <span>No</span>
                  </div>
                </label>
                <label class="option-card">
                  <input type="radio" name="emergencyNumbers" value="Not Sure" />
                  <div class="option-label">
                    <span class="option-icon"></span>
                    <span>Not Sure</span>
                  </div>
                </label>
              </div>
              <div id="emergencyNumbersError" class="error-message"></div>
            </div>

            <!-- Night Safety -->
            <div class="form-group">
              <label class="field-label">Safety feeling during night time</label>
              <div class="options-grid three-col">
                <label class="option-card">
                  <input type="radio" name="nightSafety" value="Safe" />
                  <div class="option-label">
                    <span class="option-icon"></span>
                    <span>Safe</span>
                  </div>
                </label>
                <label class="option-card">
                  <input type="radio" name="nightSafety" value="Neutral" />
                  <div class="option-label">
                    <span class="option-icon"></span>
                    <span>Neutral</span>
                  </div>
                </label>
                <label class="option-card">
                  <input type="radio" name="nightSafety" value="Unsafe" />
                  <div class="option-label">
                    <span class="option-icon"></span>
                    <span>Unsafe</span>
                  </div>
                </label>
              </div>
              <div id="nightSafetyError" class="error-message"></div>
            </div>

            <!-- Police Response -->
            <div class="form-group">
              <label class="field-label">Police responsiveness in your area</label>
              <div class="options-grid three-col">
                <label class="option-card">
                  <input type="radio" name="policeResponse" value="Immediate" />
                  <div class="option-label">
                    <span class="option-icon"></span>
                    <span>Immediate</span>
                  </div>
                </label>
                <label class="option-card">
                  <input type="radio" name="policeResponse" value="Average" />
                  <div class="option-label">
                    <span class="option-icon"></span>
                    <span>Average</span>
                  </div>
                </label>
                <label class="option-card">
                  <input type="radio" name="policeResponse" value="No Response" />
                  <div class="option-label">
                    <span class="option-icon"></span>
                    <span>No Response</span>
                  </div>
                </label>
              </div>
              <div id="policeResponseError" class="error-message"></div>
            </div>

            <!-- Women Police Comfort -->
            <div class="form-group">
              <label class="field-label">Comfort in approaching women police officers</label>
              <div class="options-grid three-col">
                <label class="option-card">
                  <input type="radio" name="womenPoliceComfort" value="Yes" />
                  <div class="option-label">
                    <span class="option-icon"></span>
                    <span>Yes</span>
                  </div>
                </label>
                <label class="option-card">
                  <input type="radio" name="womenPoliceComfort" value="No" />
                  <div class="option-label">
                    <span class="option-icon"></span>
                    <span>No</span>
                  </div>
                </label>
                <label class="option-card">
                  <input type="radio" name="womenPoliceComfort" value="Not Sure" />
                  <div class="option-label">
                    <span class="option-icon"></span>
                    <span>Not Sure</span>
                  </div>
                </label>
              </div>
              <div id="womenPoliceComfortError" class="error-message"></div>
            </div>

            <!-- Shakti App -->
            <div class="form-group">
              <label class="field-label">Did you register in Shakti App</label>
              <div class="options-grid two-col">
                <label class="option-card">
                  <input type="radio" name="shaktiApp" value="Yes" />
                  <div class="option-label">
                    <span class="option-icon"></span>
                    <span>Yes</span>
                  </div>
                </label>
                <label class="option-card">
                  <input type="radio" name="shaktiApp" value="No" />
                  <div class="option-label">
                    <span class="option-icon"></span>
                    <span>No</span>
                  </div>
                </label>
              </div>
              <div id="shaktiAppError" class="error-message"></div>
            </div>

            <!-- Remarks -->
            <div class="form-group">
              <label class="field-label" for="remarks">Remarks (Optional)</label>
              <textarea id="remarks" name="remarks" class="text-input" placeholder="Share any additional feedback or suggestions..."></textarea>
            </div>
          </div>

          <!-- Submit Button -->
          <div class="submit-container">
            <button type="submit" class="submit-btn">Submit Survey</button>
          </div>

          <!-- Success Message -->
          <div id="successMessage" class="success-message"></div>
        </div>
      </form>
    </div>
  </div>

  <!-- Load the large Police Station -> Area mapping -->
  <script src="mapping.js"></script>

  <script>
    // `policeStationAreas` is defined globally in `mapping.js`.
    // This script wires it to custom searchable dropdowns for
    // Police Station and Area / Village.

    // Form + error elements
    const form = document.getElementById("surveyForm");
    const policeStationError = document.getElementById("policeStationError");
    const areaError = document.getElementById("areaError");
    const successMessage = document.getElementById("successMessage");

    // Hidden field that stores the selected Police Station
    const policeStationInput = document.getElementById("policeStation");

    // Custom dropdown elements
    const psDropdown = document.getElementById("policeStationDropdown");
    const psDisplayButton = document.getElementById("policeStationDisplay");
    const psPlaceholder = document.getElementById("policeStationPlaceholder");
    const psValueSpan = document.getElementById("policeStationValue");
    const psPanel = document.getElementById("policeStationPanel");
    const psSearchInput = document.getElementById("policeStationSearch");
    const psOptionsList = document.getElementById("policeStationOptions");
    const psNoResults = document.getElementById("policeStationNoResults");

    // Area custom dropdown + hidden input
    const areaInput = document.getElementById("area");
    const arDropdown = document.getElementById("areaDropdown");
    const arDisplayButton = document.getElementById("areaDisplay");
    const arPlaceholder = document.getElementById("areaPlaceholder");
    const arValueSpan = document.getElementById("areaValue");
    const arPanel = document.getElementById("areaPanel");
    const arSearchInput = document.getElementById("areaSearch");
    const arOptionsList = document.getElementById("areaOptions");
    const arNoResults = document.getElementById("areaNoResults");
    const surveySections = document.getElementById("surveySections");

    // Progress indicators
    const step1Indicator = document.getElementById("step1Indicator");
    const step2Indicator = document.getElementById("step2Indicator");
    const step3Indicator = document.getElementById("step3Indicator");
    const progressLine = document.getElementById("progressLine");

    // Personal Details inputs
    const respondentNameInput = document.getElementById("respondentName");
    const respondentNameError = document.getElementById("respondentNameError");
    const mobileNumberInput = document.getElementById("mobileNumber");
    const mobileNumberError = document.getElementById("mobileNumberError");

    // Helper to get error element by id
    function $(id) {
      return document.getElementById(id);
    }

    // Helper: trim + lowercase, useful for deduplication
    function normalizeName(name) {
      return name.trim().toLowerCase();
    }

    // Helper: get selected radio value for a group
    function getRadioValue(groupName) {
      const checked = document.querySelector(
        'input[name="' + groupName + '"]:checked'
      );
      return checked ? checked.value : "";
    }

    // Update progress indicator
    function updateProgress(step) {
      // Reset all steps
      step1Indicator.classList.remove("active", "completed");
      step2Indicator.classList.remove("active", "completed");
      step3Indicator.classList.remove("active", "completed");

      if (step === 1) {
        step1Indicator.classList.add("active");
        progressLine.style.width = "33%";
      } else if (step === 2) {
        step1Indicator.classList.add("completed");
        step2Indicator.classList.add("active");
        progressLine.style.width = "66%";
      } else if (step === 3) {
        step1Indicator.classList.add("completed");
        step2Indicator.classList.add("completed");
        step3Indicator.classList.add("active");
        progressLine.style.width = "100%";
      }
    }

    // Show/hide survey sections based on Area selection
    function showSurvey() {
      surveySections.classList.add("show");
      updateProgress(2);
      // Scroll to survey sections smoothly
      setTimeout(() => {
        surveySections.scrollIntoView({ behavior: "smooth", block: "start" });
      }, 100);
    }

    function hideSurvey() {
      surveySections.classList.remove("show");
      updateProgress(1);
    }

    // Render Police Station options into the custom dropdown list
    function renderPoliceStationOptions(filterText = "") {
      psOptionsList.innerHTML = "";
      psNoResults.style.display = "none";

      const term = filterText.trim().toLowerCase();

      const stationNames = Object.keys(policeStationAreas)
        .filter((name) =>
          term ? name.toLowerCase().includes(term) : true
        )
        .sort((a, b) => a.localeCompare(b));

      if (stationNames.length === 0) {
        psNoResults.style.display = "block";
        return;
      }

      stationNames.forEach((stationName) => {
        const li = document.createElement("li");
        li.textContent = stationName;
        li.className = "select-option";

        li.addEventListener("click", () => {
          // Store the value
          policeStationInput.value = stationName;

          // Update display text
          psValueSpan.textContent = stationName;
          psValueSpan.style.display = "inline";
          psPlaceholder.style.display = "none";

          // Clear any previous error message
          policeStationError.classList.remove("show");

          // When station changes, refresh areas
          populateAreasForStation(stationName);
          areaError.classList.remove("show");

          closePoliceStationPanel();
        });

        psOptionsList.appendChild(li);
      });
    }

    function openPoliceStationPanel() {
      psPanel.classList.add("open");
      psDisplayButton.classList.add("active");
      psSearchInput.value = "";
      renderPoliceStationOptions("");
      psSearchInput.focus();
    }

    function closePoliceStationPanel() {
      psPanel.classList.remove("open");
      psDisplayButton.classList.remove("active");
    }

    // Populate Areas dropdown for a selected Police Station
    function populateAreasForStation(stationName) {
      // Reset stored value and display each time station changes
      areaInput.value = "";
      arValueSpan.textContent = "";
      arValueSpan.style.display = "none";
      arPlaceholder.textContent = stationName
        ? "Select Area / Village"
        : "Select Area (choose station first)";

      // Hide the full survey until a new Area is chosen
      hideSurvey();

      // Re-render list for the new station with no search filter
      renderAreaOptions(stationName, "");
      closeAreaPanel();
    }

    // Render Areas for the given station into the Area dropdown
    function renderAreaOptions(stationName, filterText = "") {
      arOptionsList.innerHTML = "";
      arNoResults.style.display = "none";

      if (!stationName) {
        return;
      }

      const rawAreas = policeStationAreas[stationName] || [];
      const seen = new Set(); // for duplicate removal
      const term = filterText.trim().toLowerCase();

      const areasToShow = [];

      rawAreas.forEach((raw) => {
        if (typeof raw !== "string") return;

        const trimmed = raw.trim();
        if (!trimmed) return; // skip empty after trimming

        const key = normalizeName(trimmed);
        if (seen.has(key)) return; // skip duplicates
        seen.add(key);

        if (term && !trimmed.toLowerCase().includes(term)) {
          return; // filter by search term
        }

        areasToShow.push(trimmed);
      });

      if (areasToShow.length === 0) {
        arNoResults.style.display = "block";
        return;
      }

      areasToShow.forEach((areaName) => {
        const li = document.createElement("li");
        li.textContent = areaName;
        li.className = "select-option";

        li.addEventListener("click", () => {
          areaInput.value = areaName;

          arValueSpan.textContent = areaName;
          arValueSpan.style.display = "inline";
          arPlaceholder.style.display = "none";

          areaError.classList.remove("show");

          closeAreaPanel();
          showSurvey();
        });

        arOptionsList.appendChild(li);
      });
    }

    // Toggle open/close when the main display is clicked
    psDisplayButton.addEventListener("click", () => {
      const isOpen = psPanel.classList.contains("open");
      if (isOpen) {
        closePoliceStationPanel();
      } else {
        openPoliceStationPanel();
      }
    });

    // Close when clicking outside the dropdown
    document.addEventListener("click", (event) => {
      if (!psDropdown.contains(event.target)) {
        closePoliceStationPanel();
      }
    });

    // Filter police stations as the user types
    psSearchInput.addEventListener("input", function () {
      renderPoliceStationOptions(this.value);
    });

    // --- Area dropdown behaviour ---

    function openAreaPanel() {
      const stationName = policeStationInput.value;
      if (!stationName) {
        // If no station, do nothing. User must pick station first.
        return;
      }

      arPanel.classList.add("open");
      arDisplayButton.classList.add("active");
      arSearchInput.value = "";
      renderAreaOptions(stationName, "");
      arSearchInput.focus();
    }

    function closeAreaPanel() {
      arPanel.classList.remove("open");
      arDisplayButton.classList.remove("active");
    }

    arDisplayButton.addEventListener("click", () => {
      const isOpen = arPanel.classList.contains("open");
      if (isOpen) {
        closeAreaPanel();
      } else {
        openAreaPanel();
      }
    });

    // Close Area panel when clicking outside of it
    document.addEventListener("click", (event) => {
      if (!arDropdown.contains(event.target)) {
        closeAreaPanel();
      }
    });

    // Live filter for areas
    arSearchInput.addEventListener("input", function () {
      const stationName = policeStationInput.value;
      if (!stationName) {
        return;
      }
      renderAreaOptions(stationName, this.value);
    });

    // Track survey progress
    function updateSurveyProgress() {
      const personalFields = ["respondentName", "ageGroup", "mobileNumber", "occupation"];
      const socialFields = ["familyBehavior", "addiction", "neighbourhood"];
      const safetyFields = ["streetSafety", "publicTransport", "schoolSafety", "cyberHarassment", 
                           "stalking", "emergencyNumbers", "nightSafety", "policeResponse", 
                           "womenPoliceComfort", "shaktiApp"];
      
      let personalComplete = personalFields.every(field => {
        if (field === "respondentName" || field === "mobileNumber") {
          return $(field).value.trim() !== "";
        }
        return getRadioValue(field) !== "" || document.querySelectorAll('input[name="' + field + '"]:checked').length > 0;
      });

      let socialComplete = socialFields.every(field => {
        return getRadioValue(field) !== "" || document.querySelectorAll('input[name="' + field + '"]:checked').length > 0;
      });

      let safetyComplete = safetyFields.every(field => {
        return getRadioValue(field) !== "";
      });

      if (personalComplete && socialComplete && safetyComplete) {
        updateProgress(3);
      } else if (personalComplete) {
        updateProgress(2);
      }
    }

    // Add listeners to track progress
    document.querySelectorAll('input[type="radio"], input[type="checkbox"], .text-input').forEach(input => {
      input.addEventListener("change", updateSurveyProgress);
      input.addEventListener("input", updateSurveyProgress);
    });

    // Basic validation on submit
    form.addEventListener("submit", function (event) {
      event.preventDefault();

      policeStationError.classList.remove("show");
      areaError.classList.remove("show");
      successMessage.classList.remove("show");

      const selectedStation = policeStationInput.value;
      const selectedArea = areaInput.value;

      let isValid = true;

      if (!selectedStation) {
        policeStationError.classList.add("show");
        isValid = false;
      }

      if (!selectedArea) {
        areaError.classList.add("show");
        isValid = false;
      }

      // ---- Validate Personal Details ----

      // 1. Respondent Name
      respondentNameError.textContent = "";
      respondentNameError.classList.remove("show");
      if (!respondentNameInput.value.trim()) {
        respondentNameError.textContent = "Please enter your name.";
        respondentNameError.classList.add("show");
        isValid = false;
      }

      // 2. Age Group
      $("ageGroupError").textContent = "";
      $("ageGroupError").classList.remove("show");
      if (!getRadioValue("ageGroup")) {
        $("ageGroupError").textContent = "Please select your age group.";
        $("ageGroupError").classList.add("show");
        isValid = false;
      }

      // 3. Mobile Number (exactly 10 digits)
      mobileNumberError.textContent = "";
      mobileNumberError.classList.remove("show");
      const mobile = mobileNumberInput.value.trim();
      if (!/^\d{10}$/.test(mobile)) {
        mobileNumberError.textContent =
          "Please enter a valid 10 digit mobile number.";
        mobileNumberError.classList.add("show");
        isValid = false;
      }

      // 4. Occupation
      $("occupationError").textContent = "";
      $("occupationError").classList.remove("show");
      if (!getRadioValue("occupation")) {
        $("occupationError").textContent = "Please select your occupation.";
        $("occupationError").classList.add("show");
        isValid = false;
      }

      // ---- Social Environment ----

      // 5. Family behavior
      $("familyBehaviorError").textContent = "";
      $("familyBehaviorError").classList.remove("show");
      if (!getRadioValue("familyBehavior")) {
        $("familyBehaviorError").textContent =
          "Please select family behaviour.";
        $("familyBehaviorError").classList.add("show");
        isValid = false;
      }

      // 6. Addiction in family (at least one checkbox)
      $("addictionError").textContent = "";
      $("addictionError").classList.remove("show");
      const addictionChecked = document.querySelectorAll(
        'input[name="addiction"]:checked'
      );
      if (addictionChecked.length === 0) {
        $("addictionError").textContent =
          "Please select at least one option (including 'No' if none).";
        $("addictionError").classList.add("show");
        isValid = false;
      }

      // 7. Neighbourhood behaviour
      $("neighbourhoodError").textContent = "";
      $("neighbourhoodError").classList.remove("show");
      if (!getRadioValue("neighbourhood")) {
        $("neighbourhoodError").textContent =
          "Please select neighbourhood behaviour.";
        $("neighbourhoodError").classList.add("show");
        isValid = false;
      }

      // ---- Safety & Public Experience ----

      // 8. Safety of street/locality
      $("streetSafetyError").textContent = "";
      $("streetSafetyError").classList.remove("show");
      if (!getRadioValue("streetSafety")) {
        $("streetSafetyError").textContent =
          "Please choose how safe your street/locality is.";
        $("streetSafetyError").classList.add("show");
        isValid = false;
      }

      // 9. Public transportation problems
      $("publicTransportError").textContent = "";
      $("publicTransportError").classList.remove("show");
      if (!getRadioValue("publicTransport")) {
        $("publicTransportError").textContent =
          "Please answer about public transportation problems.";
        $("publicTransportError").classList.add("show");
        isValid = false;
      }

      // 10. School/college surroundings safety
      $("schoolSafetyError").textContent = "";
      $("schoolSafetyError").classList.remove("show");
      if (!getRadioValue("schoolSafety")) {
        $("schoolSafetyError").textContent =
          "Please select school/college surroundings safety.";
        $("schoolSafetyError").classList.add("show");
        isValid = false;
      }

      // 11. Cyber harassment
      $("cyberHarassmentError").textContent = "";
      $("cyberHarassmentError").classList.remove("show");
      if (!getRadioValue("cyberHarassment")) {
        $("cyberHarassmentError").textContent =
          "Please answer about cyber harassment/blackmail.";
        $("cyberHarassmentError").classList.add("show");
        isValid = false;
      }

      // 12. Forced love proposals / stalking
      $("stalkingError").textContent = "";
      $("stalkingError").classList.remove("show");
      if (!getRadioValue("stalking")) {
        $("stalkingError").textContent =
          "Please answer about forced love proposals/stalking.";
        $("stalkingError").classList.add("show");
        isValid = false;
      }

      // 13. Emergency police numbers visibility
      $("emergencyNumbersError").textContent = "";
      $("emergencyNumbersError").classList.remove("show");
      if (!getRadioValue("emergencyNumbers")) {
        $("emergencyNumbersError").textContent =
          "Please answer about emergency police numbers visibility.";
        $("emergencyNumbersError").classList.add("show");
        isValid = false;
      }

      // 14. Safety during night time
      $("nightSafetyError").textContent = "";
      $("nightSafetyError").classList.remove("show");
      if (!getRadioValue("nightSafety")) {
        $("nightSafetyError").textContent =
          "Please select how safe you feel at night.";
        $("nightSafetyError").classList.add("show");
        isValid = false;
      }

      // 15. Police responsiveness
      $("policeResponseError").textContent = "";
      $("policeResponseError").classList.remove("show");
      if (!getRadioValue("policeResponse")) {
        $("policeResponseError").textContent =
          "Please select police responsiveness.";
        $("policeResponseError").classList.add("show");
        isValid = false;
      }

      // 16. Comfort with women police officers
      $("womenPoliceComfortError").textContent = "";
      $("womenPoliceComfortError").classList.remove("show");
      if (!getRadioValue("womenPoliceComfort")) {
        $("womenPoliceComfortError").textContent =
          "Please answer about comfort with women police officers.";
        $("womenPoliceComfortError").classList.add("show");
        isValid = false;
      }

      // 17. Shakti App registration
      $("shaktiAppError").textContent = "";
      $("shaktiAppError").classList.remove("show");
      if (!getRadioValue("shaktiApp")) {
        $("shaktiAppError").textContent =
          "Please answer whether you registered in Shakti App.";
        $("shaktiAppError").classList.add("show");
        isValid = false;
      }

      if (!isValid) {
        return;
      }

      successMessage.textContent =
        "Selected Police Station: " +
        selectedStation +
        " | Area: " +
        selectedArea +
        ". Your responses have been recorded.";
      successMessage.classList.add("show");

      // Optionally, you could clear the form here if desired.
      // form.reset();
    });

    // ---- Initial setup ----
    renderPoliceStationOptions("");
    arPlaceholder.textContent = "Select Area (choose station first)";
  </script>
</body>
</html>